(function(){Date.ext={};Date.ext.util={};Date.ext.util.xPad=function(a,c,b){if(typeof(b)=="undefined"){b=10}for(;parseInt(a,10)<b&&b>1;b/=10){a=c.toString()+a}return a.toString()};Date.prototype.locale="en-GB";if(document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang){Date.prototype.locale=document.getElementsByTagName("html")[0].lang}Date.ext.locales={};Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"};Date.ext.locales["en-US"]=Date.ext.locales.en;Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z";Date.ext.locales["en-US"].x="%D";Date.ext.locales["en-US"].X="%r";Date.ext.locales["en-GB"]=Date.ext.locales.en;Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"];Date.ext.formats={a:function(a){return Date.ext.locales[a.locale].a[a.getDay()]},A:function(a){return Date.ext.locales[a.locale].A[a.getDay()]},b:function(a){return Date.ext.locales[a.locale].b[a.getMonth()]},B:function(a){return Date.ext.locales[a.locale].B[a.getMonth()]},c:"toLocaleString",C:function(a){return Date.ext.util.xPad(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return Date.ext.util.xPad(parseInt(Date.ext.util.G(a)/100,10),0)},G:function(c){var e=c.getFullYear();var b=parseInt(Date.ext.formats.V(c),10);var a=parseInt(Date.ext.formats.W(c),10);if(a>b){e++}else{if(a===0&&b>=52){e--}}return e},H:["getHours","0"],I:function(b){var a=b.getHours()%12;return Date.ext.util.xPad(a===0?12:a,0)},j:function(c){var a=c-new Date(""+c.getFullYear()+"/1/1 GMT");a+=c.getTimezoneOffset()*60000;var b=parseInt(a/60000/60/24,10)+1;return Date.ext.util.xPad(b,0,100)},m:function(a){return Date.ext.util.xPad(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a){return Date.ext.locales[a.locale].p[a.getHours()>=12?1:0]},P:function(a){return Date.ext.locales[a.locale].P[a.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(a){var b=a.getDay();return b===0?7:b},U:function(e){var a=parseInt(Date.ext.formats.j(e),10);var c=6-e.getDay();var b=parseInt((a+c)/7,10);return Date.ext.util.xPad(b,0)},V:function(e){var c=parseInt(Date.ext.formats.W(e),10);var a=(new Date(""+e.getFullYear()+"/1/1")).getDay();var b=c+(a>4||a<=1?0:1);if(b==53&&(new Date(""+e.getFullYear()+"/12/31")).getDay()<4){b=1}else{if(b===0){b=Date.ext.formats.V(new Date(""+(e.getFullYear()-1)+"/12/31"))}}return Date.ext.util.xPad(b,0)},w:"getDay",W:function(e){var a=parseInt(Date.ext.formats.j(e),10);var c=7-Date.ext.formats.u(e);var b=parseInt((a+c)/7,10);return Date.ext.util.xPad(b,0,10)},y:function(a){return Date.ext.util.xPad(a.getFullYear()%100,0)},Y:"getFullYear",z:function(c){var b=c.getTimezoneOffset();var a=Date.ext.util.xPad(parseInt(Math.abs(b/60),10),0);var e=Date.ext.util.xPad(b%60,0);return(b>0?"-":"+")+a+e},Z:function(a){return a.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(a){return"%"}};Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};Date.ext.aggregates.z=Date.ext.formats.z(new Date());Date.ext.aggregates.Z=Date.ext.formats.Z(new Date());Date.ext.unsupported={};Date.prototype.strftime=function(a){if(!(this.locale in Date.ext.locales)){if(this.locale.replace(/-[a-zA-Z]+$/,"") in Date.ext.locales){this.locale=this.locale.replace(/-[a-zA-Z]+$/,"")}else{this.locale="en-GB"}}var c=this;while(a.match(/%[cDhnrRtTxXzZ]/)){a=a.replace(/%([cDhnrRtTxXzZ])/g,function(e,d){var g=Date.ext.aggregates[d];return(g=="locale"?Date.ext.locales[c.locale][d]:g)})}var b=a.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(e,d){var g=Date.ext.formats[d];if(typeof(g)=="string"){return c[g]()}else{if(typeof(g)=="function"){return g.call(c,c)}else{if(typeof(g)=="object"&&typeof(g[0])=="string"){return Date.ext.util.xPad(c[g[0]](),g[1])}else{return d}}}});c=null;return b}})();(function(a){Date.prototype.daysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()};Date.prototype.startOfDay=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0)};Date.prototype.endOfDay=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),23,59,59,999)};Date.prototype.startOfWeek=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate()-this.getDay()).startOfDay()};Date.prototype.endOfWeek=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(6-this.getDay())).endOfDay()};Date.prototype.startOfMonth=function(){return new Date(this.getFullYear(),this.getMonth(),1).startOfDay()};Date.prototype.endOfMonth=function(){return new Date(this.getFullYear(),this.getMonth(),this.daysInMonth()).endOfDay()};Date.prototype.startOfCalendar=function(){return(new Date(this.getFullYear(),this.getMonth(),1)).startOfWeek()};Date.prototype.endOfCalendar=function(){return(new Date(this.getFullYear(),this.getMonth(),this.daysInMonth())).endOfWeek()};Date.prototype.firstDayOfMonth=function(){this.startOfMonth().getDay()};Date.prototype.lastDayOfMonth=function(){this.endOfMonth().getDay()};a.fn.rangepicker=function(F){var l=this;var y=new Date().startOfDay().valueOf();var k=7;var G=6;var Q=0;var L=1;var T=2;var D=3;var c,j;var b,A,x,o,H,C,n;var Z,q,p,w,aa,d,ab,t,s,J,M,Y;var r,f,V,i,N;function v(ac){selectedDate=new Date(a(this).attr("id"));if(cyclePeriodTypes){if(b.valueOf()===selectedDate.valueOf()&&o==Q){o=L}else{if(b.valueOf()===selectedDate.valueOf()&&o==L){o=T}else{if(b.valueOf()===selectedDate.valueOf()&&o==T){o=Q}}}}b=selectedDate;W();K();ac.preventDefault()}function h(ac){b=new Date(A);o=Q;W();K();ac.preventDefault()}function u(ac){o=D;K();ac.preventDefault()}function I(ad){var ac=H.getMonth()-1;if(ac<0){H.setFullYear(H.getFullYear()-1);ac=11}H.setMonth(ac);K();ad.preventDefault()}function P(ad){var ac=H.getMonth()+1;if(ac>11){H.setFullYear(H.getFullYear()+1);ac=0}H.setMonth(ac);K();ad.preventDefault()}function z(ac){H=new Date(A.startOfMonth());K();ac.preventDefault()}function X(ac){H=new Date(y).startOfMonth();K();ac.preventDefault()}function E(ac){H=new Date(x.startOfMonth());K();ac.preventDefault()}function R(ad){var ac=a(aa);ac.attr("id",ad.strftime(j));ac.html(ad.getDate());if(ad.valueOf()===y){ac.addClass(V)}if(ad.valueOf()>=A.valueOf()&&ad.valueOf()<=x.valueOf()){ac.addClass(f)}if(o===D){if(ad.valueOf()===A.startOfDay().valueOf()||ad.valueOf()===x.startOfDay().valueOf()){ac.addClass(r)}}else{if(ad.valueOf()===b.valueOf()){ac.addClass(r)}}if(ad.getMonth()!==H.getMonth()){ac.addClass(i)}else{ac.addClass(N)}if((minDate===null||ad>minDate)&&(maxDate===null||ad<maxDate)){ac.on("click",v)}else{ac.on("click",function(ae){ae.preventDefault()});ac.addClass("disabled")}return ac}function B(ad){var ac=a(w);for(var ae=0;ae<k;ae++){ac.append(R(new Date(ad)));ad.setDate(ad.getDate()+1)}return ac}function e(ac){var ae=a(p);for(var ad=0;ad<G;ad++){ae.append(B(new Date(ac)));ac.setDate(ac.getDate()+k)}return ae}function U(){return a(q).append(e(new Date(H.startOfCalendar())))}function m(){var ae=a(rangeTemplate);var ac=a(fromTemplate);var af=a(todayTemplate);var ad=a(toTemplate);ac.attr("id",A.strftime(j));ac.html(A.strftime(j));af.attr("id",new Date(y).strftime(j));ad.attr("id",x.strftime(j));ad.html(x.strftime(j));ac.on("click",z);af.on("click",X);ad.on("click",E);ae.append(ac);ae.append(af);ae.append(ad);return ae}function O(){var af=a(d);var ae=a(ab);var ac=a(t).html(H.strftime(c));var ad=a(s);if(minDate===null||minDate<H){ae.on("click",I)}else{ae.on("click",function(ag){ag.preventDefault()});ae.addClass("disabled")}if(maxDate===null||maxDate>H.endOfMonth()){ad.on("click",P)}else{ad.on("click",function(ag){ag.preventDefault()});ad.addClass("disabled")}af.append(ae);af.append(ac);af.append(ad);return af}function g(){var ad=a(J);var ac=a(M);var ae=a(Y);ac.on("click",h);ae.on("click",u);ad.append(ac);ad.append(ae);if(o===D){ae.addClass(r)}else{ac.addClass(r)}return ad}function W(){if(o===D){if(C){x=b.endOfDay();if(A>x){var ac=A.startOfDay();A=x.startOfDay();x=ac}if(n){n([A,x])}}else{A=b.startOfDay();x=b.endOfDay()}C=!C}else{from=new Date(b.valueOf());to=new Date(b.valueOf());if(o===Q){from=from.startOfDay();to=to.endOfDay()}else{if(o===L){from=from.startOfWeek();to=to.endOfWeek()}else{if(o===T){from=from.startOfMonth();to=to.endOfMonth()}}}if(minDate&&from<minDate){from=new Date(minDate.valueOf())}if(maxDate&&to>maxDate){to=new Date(maxDate.valueOf())}A=from;x=to;if(n){n([A,x])}}}function K(){var ac=a(Z);ac.append(O());ac.append(m());ac.append(U());ac.append(g());l.html(ac)}function S(ac){if(ac===undefined){ac={}}b=ac.currentDate||new Date().startOfDay();A=ac.dateFrom||b.startOfDay();x=ac.dateTo||b.endOfDay();o=ac.periodType||Q;H=ac.displayedDate||b.startOfMonth();n=ac.onRangeUpdated||function(ad){};cyclePeriodTypes=ac.cycleModes||true;C=false;j=ac.dateFormat||"%Y-%m-%d";c=ac.labelFormat||"%B %Y";minDate=ac.minDate||null;maxDate=ac.maxDate||new Date();Z=ac.rootTemplate||'<div class="rangepicker"></div>';aa=ac.dayTemplate||'<a href="#" class="day"></a>';w=ac.weekTemplate||'<div class="week"></div>';p=ac.monthTemplate||'<div class="month"></div>';q=ac.calendarTemplate||'<div class="calendar"></div>';d=ac.navTemplate||'<div class="nav"></div>';ab=ac.prevTemplate||'<a href="#" class="prev">&lt;</a>';t=ac.labelTemplate||'<a href="#" class="label"></a>';s=ac.nextTemplate||'<a href="#" class="next">&gt;</a>';rangeTemplate=ac.rangeTemplate||'<div class="range"></div>';fromTemplate=ac.fromTemplate||'<a href="#" class="from"></a>';todayTemplate=ac.todayTemplate||'<a href="#" class="today">Today</a>';toTemplate=ac.toTemplate||'<a href="#" class="to"></a>';J=ac.modeTemplate||'<div class="mode"></div>';M=ac.fixedTemplate||'<a href="#" class="fixed">Fixed</a>';Y=ac.customTemplate||'<a href="#" class="custom">Custom</a>';i=ac.disabledClass||"disabled";N=ac.enabledClass||"enabled";r=ac.selectedClass||"selected";f=ac.includedClass||"included";V=ac.todayClass||"today";K();W();return l}return S(F)}}(jQuery));